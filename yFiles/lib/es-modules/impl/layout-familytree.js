/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.3.0.3.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2020 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,n,i){"use strict";function t(f){var n=new $.C.JOC,i=n.$dJO;i.$LkO=new $.C.GPC.$n(0,!1),i.$ySO=60,i.$rRO=20;var t=n.$jJO;switch(f.$f7){case-1:t.$QtO=0;break;case 0:t.$QtO=.5;break;case 1:t.$QtO=1}return n}function l($,f,n){for(var i=0,t=0,l=f.$QWO();l.$Fq;l.$ov()){var r=l.$Rq;1===n.$zw(r)?r.$f7>0&&t++:i+=r.$f6}return t<=1&&2===i}function r(f,n,i){var t=n.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY);f.$f16=n.$WZO(),f.$f17=n.$WZO(),f.$f3=n.$WZO(),f.$f4=n.$WZO(),f.$f12 instanceof $.C.JOC&&0!==f.$f20&&(f.$f=f.$f12.$TxP(n)),function(f,n,i){f.$f5=$.DF.$m13(n.$jZ),f.$f1=new $.FE;var t=new $.FE;f.$f11=new $.C.EXA.$m,f.$f2=n.$XZO(),f.$f15=n.$XZO(),f.$f6=n.$XZO(),f.$f9=n.$XZO(),f.$f8=n.$XZO(),f.$f19=new $.ME;for(var l=n.$ZZO();l.$Fq;l.$ov()){var r=new $.C.EXA.$m,_=l.$Rq;f.$f2.$bB(_,"n"+_.$iM),1===n.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(_)?e(f,_,r):o(f,_,r);var u=new $.FE;u.$m(r),a(f,r,u);for(var s=0;s<u.$fj;s++)if((r=u.$ij(s)).$f1>1){for(var P=new $.FH.$c1("GN"),v=0;v<r.$f1;v++)P.$m2($.LF.$m8(r.$ij(v).$iM)),P.$m2("/");t.$m(P.toString()),f.$f1.$m(r)}}for(var E=0;E<f.$f1.$fj;E++){var T=new $.C.WVA(0,0,0,0),h=n.$MYO(),r=f.$f1.$ij(E);f.$f11.$m5(h);for(var O=0;O<r.$f1;O++){var D=r.$ij(O);f.$f15.$bB(D,t.$ij(E)),f.$f9.$bB(D,i),f.$f8.$bB(D,T)}f.$f8.$bB(h,T),f.$f6.$Fl(h,!0),f.$f2.$bB(h,t.$ij(E))}n.$nBP($.T.YXA.NODE_ID_DP_KEY,f.$f2),n.$nBP($.T.YXA.PARENT_NODE_ID_DP_KEY,f.$f15),n.$nBP($.T.YXA.GROUP_DP_KEY,f.$f6),n.$nBP($.T.YXA.GROUP_NODE_INSETS_DP_KEY,f.$f8),n.$nBP($.T.ZJC.LAYOUT_DP_KEY,f.$f9)}(f,n,i);for(var l=n.$ZlP($.T.GJC.NODE_ID_DP_KEY),r=n.$ZZO();r.$Fq;r.$ov()){var _=r.$Rq;if(1===n.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(_)){for(var u=null,s=_.$ZnP(null);s.$Fq;s.$ov()){var P=s.$Qq.$f3;if(null===u&&(u=P),n.$rCP(s.$Qq,new $.C.FWA.$n(0,n.$m38(s.$Qq.$f2).$os/2)),n.$tCP(s.$Qq,new $.C.FWA.$n(0,-n.$m38(s.$Qq.$f3).$os/2)),f.$f3.$bB(s.$Qq,$.T.FLC.$n(2,!0)),f.$f4.$bB(s.$Qq,$.T.FLC.$n(1,!0)),null!==f.$f&&u!==P){var v=null===l?u:l.$zw(u),E=null===l?P:l.$zw(P);(4===f.$f20||3===f.$f20)!==(2===t.$zw(P))?f.$f.$UE(v,E):f.$f.$XE(v,E)}}for(var T=new $.FE,h="CG"+_.$iM,O=_.$ZnP(null);O.$Fq;O.$ov()){var D=O.$Qq;f.$f16.$bB(D,h);var C=f.$f15.$zw(D.$f3);null!==C&&-1!==T.indexOf(C)||(f.$f17.$bB(D,h),null!==C&&T.$m(C))}}}n.$nBP($.T.HLC.SOURCE_GROUP_ID_DP_KEY,f.$f16),n.$nBP($.T.HLC.TARGET_GROUP_ID_DP_KEY,f.$f17),n.$nBP($.T.HLC.SOURCE_PORT_CONSTRAINT_DP_KEY,f.$f3),n.$nBP($.T.HLC.TARGET_PORT_CONSTRAINT_DP_KEY,f.$f4)}function e(f,n,i){if(1!==n.$f2.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(n))throw $.IG.$m30(C[4]);if(!f.$f5[n.$iM]){i.$m5(n),f.$f5[n.$iM]=!0;for(var t=0,l=n.$zbO();l.$Fq;l.$ov())if(o(f,l.$Rq,i),++t>2)throw $.IG.$m30(C[5])}}function o(f,n,i){if(1===n.$f2.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(n))throw $.IG.$m30(C[6]);if(!f.$f5[n.$iM]){i.$m5(n),f.$f5[n.$iM]=!0;for(var t=n.$pbO();t.$Fq;t.$ov())e(f,t.$Rq,i)}}function a(f,n,i){var t=-1,l=-1;for(t=0;t<n.$f1;t++){var r=n.$ij(t);if(1===r.$f2.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(r)){for(var e=r.$pbO();e.$Fq&&!((l=n.indexOf(e.$Rq))>-1);e.$ov());if(l>-1)break}}if(-1!==l){var o=new $.C.EXA.$m,s=n.$ij(t),P=n.$ij(l),v=new $.C.EXA.$m;n.$Dp(P),o.$m5(P);for(e=P.$pbO();e.$Fq;e.$ov()){var E=e.$Rq;n.$Dp(E),o.$m5(E);for(var T=E.$zbO();T.$Fq;T.$ov()){var h=T.$Rq;h!==P&&(_(f,E,h,s,P)?u(f,E,n,o):v.$m5(E))}}if(n.$MXO()){n.$OdO(o),v.$zp(),n.$Dp(P),o.$m5(P);for(e=P.$pbO();e.$Fq;e.$ov()){E=e.$Rq;n.$Dp(E),o.$m5(E),v.$m5(E)}}for(e=v.$QWO();e.$Fq;e.$ov())for(var O=e.$Rq.$clP(null);O.$Fq;O.$ov())if(O.$Qq.$f2!==P){var D=P.$f2;D.$rCP(O.$Qq,new $.C.FWA.$n(0,0)),D.$tCP(O.$Qq,new $.C.FWA.$n(0,0)),f.$f3.$bB(O.$Qq,$.T.FLC.$n(0,!0)),f.$f4.$bB(O.$Qq,$.T.FLC.$n(0,!0)),f.$f19.$m(O.$Qq)}a(f,n,i),a(f,o,i),i.$m(o)}}function _(f,n,i,t,l){return function f(n,i,t,l,r,e){if(!$.KE.$m9(e,new $.T.DNC.T(i,t)))return!0;var o=!0;for(var a=t.$pbO();a.$Fq;a.$ov()){var _=a.$Rq;if(_!==i){if(_===l)return!1;for(var u=_.$zbO();u.$Fq;u.$ov()){var s=u.$Rq;if(s!==t&&!f(n,_,s,l,r,e)){o=!1;break}}}}return o}(f,n,i,t,l,new $.ME)}function u($,f,n,i){for(var t=f.$zbO();t.$Fq;t.$ov()){var l=t.$Rq;if(!(n.indexOf(l)<0)){n.$Dp(l),i.$m5(l);for(var r=l.$pbO();r.$Fq;r.$ov()){var e=r.$Rq;n.indexOf(e)>-1&&(n.$Dp(e),i.$m5(e),u($,e,n,i))}}}}function s($,f,n,i){for(var t=1,l=f.$zbO();l.$Fq;l.$ov()){var r=l.$Rq;if(r!==n&&-1===i.indexOf(r)){i.$m5(r);for(var e=r.$pbO();e.$Fq;e.$ov()){var o=e.$Rq;o!==f&&(t+=s($,o,r,i))}}}return t}var P=f.lang.ClassDefinition,v=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),E=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),T=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),h=(f.lang.String,f.lang.decorators.Type),O=f.lang.decorators.OptionArgs,D=f.lang.decorators.SetterArg;f.lang.addMappings("yFiles-for-HTML-Complete-2.3.0.3-Evaluation (Build a8bb13db3ea7-12/02/2020)",{get _$_vpd(){return["alignment","$qc",h("yfiles._R.C.FNC",5)]},_$_wpd:["topLayout","$rc"],_$_agf:["partnerlessBelow","$KzO"],_$_nzf:["offsetForFamilyNodes","$TJO"],_$_zhg:["familyNodesAlwaysBelow","$lNO"],get _$_xrg(){return["familyMembersSortingPolicy","$oTO",h("yfiles._R.C.GNC",5)]},_$_ysg:["spacingBetweenFamilyMembers","$RTO"],get _$_fjn(){return["FamilyTreeLayout","DNC",O(D("topLayout"),D("spacingBetweenFamilyMembers"),D("offsetForFamilyNodes"),D("partnerlessBelow"),D("familyNodesAlwaysBelow"),D("alignment","yfiles._R.C.FNC"),D("parallelEdgeRouterEnabled"),D("selfLoopRouterEnabled"),D("familyMembersSortingPolicy","yfiles._R.C.GNC"),D("labeling"),D("selfLoopRouter"),D("parallelEdgeRouter"),D("componentLayout"),D("subgraphLayout"),D("hideGroupsStage"),D("orientationLayout"),D("orientationLayoutEnabled"),D("layoutOrientation","yfiles._R.C.RHC"),D("labelingEnabled"),D("hideGroupsStageEnabled"),D("componentLayoutEnabled"),D("subgraphLayoutEnabled"))]},_$_gjn:["FamilyType","ENC"],_$_hjn:["VerticalNodeAlignment","FNC"],_$_ijn:["FamilyMembersSortingPolicy","GNC"],_$$_rta:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var C=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];E("_$$_rta",function(n){n._$_fjn=new P(function(){return{$extends:$.C.CKC,constructor:function(){$.C.CKC.call(this),this.$f=null,this.$DOO=!1,this.$yCO.$Tf=12,this.$f12=t(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_wpd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?t(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$rc;return $.C.HJC.isInstance(f)&&(f=f.$is),f instanceof $.C.JOC},_$_ysg:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.IG.$m2();this.$f13=f}},_$_nzf:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.IG.$m2();this.$f14=f}},_$_agf:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_zhg:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_vpd:{get:function(){return this.$f7},set:function(f){var n=0;switch(0|f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.IG.$m18(C[0])}null!==this.$f12&&this.$f12 instanceof $.C.JOC&&(this.$f12.$jJO.$QtO=n),this.$f7=0|f}},$GSO:{set:function($){this.$f48=$}},$yMO:{set:function($){this.$f31=$}},$f20:0,$f:null,_$_xrg:{get:function(){return this.$f20},set:function(f){switch(0|f){case 0:case 1:case 2:case 3:case 4:this.$f20=0|f;break;default:throw $.IG.$m2()}}},$TnP:function(f){if(null===f.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY))throw $.IG.$m28(C[1]+$.T.DNC.FAMILY_TYPE_DP_KEY+C[2]);var n=new $.C.VXA(f),i=f.$ZlP($.T.YXA.GROUP_DP_KEY),t=f.$ZlP($.T.YXA.PARENT_NODE_ID_DP_KEY),l=f.$ZlP($.T.YXA.NODE_ID_DP_KEY),e=f.$ZlP($.T.YXA.GROUP_NODE_INSETS_DP_KEY),o=new $.C.VXA(f),a=null,_=$.T.WXA.$z(),u=$.T.WXA.$z(),s=$.T.WXA.$z(),P=$.T.WXA.$z(),v=$.T.WXA.$x(),E=null;if(function(f,n){f.$f21=$.T.WXA.$z();var i=n.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY);if(null!==i)for(var t=n.$ZZO();t.$Fq;t.$ov()){var l=t.$Rq;1===i.$zw(l)&&f.$f21.$hB(l,l.$f7)}}(this,f),function(f,n){f.$f22=$.T.WXA.$z();var i=n.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY);if(null!==i)for(var t=n.$ZZO();t.$Fq;t.$ov()){var l=t.$Rq;1===i.$zw(l)&&f.$f22.$hB(l,l.$f6)}}(this,f),null!==i){a=f.$WZO();for(var h=!1,O=f.$YZO();O.$Fq;O.$ov()){var D=O.$Qq;i.$xl(D.$f2)!==i.$xl(D.$f3)?(a.$Fl(D,!0),o.$ndO(D),h=!0):a.$Fl(D,!1)}h||(f.$WkP(a),a=null);for(var w=f.$ZZO();w.$Fq;w.$ov()){var Y=w.$Rq;i.$xl(Y)&&(v.$bB(l.$zw(Y),Y),n.$pdO(Y),_.$Fl(Y,!0),u.$bB(Y,t.$zw(Y)),s.$bB(Y,l.$zw(Y)),P.$bB(Y,e.$zw(Y)))}null!==i&&f.$zqP($.T.YXA.GROUP_DP_KEY),null!==t&&f.$zqP($.T.YXA.PARENT_NODE_ID_DP_KEY),null!==l&&f.$zqP($.T.YXA.NODE_ID_DP_KEY),null!==e&&f.$zqP($.T.YXA.GROUP_NODE_INSETS_DP_KEY)}var c=new $.T.DNC.T1(this);if(r(this,f,c),null!==i){var m=new $.C.ZXA(f);for(w=f.$ZZO();w.$Fq;w.$ov()){Y=w.$Rq;if(m.$JiP(Y)){var A=new $.FE;_.$Fl(Y,!1);for(var F=m.$HiP(Y).$m3();F.$p;){var q=F.$m(),R=t.$zw(q);if(null!==R){for(var N=0;N<A.$fj;N++)if(R===t.$zw(A.$ij(N))){R=null;break}null!==R&&A.$m(q)}}if(0===A.$fj){q=m.$HiP(Y).$rYO();u.$bB(Y,t.$zw(q)),s.$bB(Y,l.$zw(q))}else if(u.$bB(Y,t.$zw(A.$ij(0))),s.$bB(Y,l.$zw(A.$ij(0))),A.$fj>1){for(var b=0;b<A.$fj;b++)for(var z=v.$zw(t.$zw(A.$ij(b))),d=0;d<A.$fj;d++){var g=v.$zw(t.$zw(A.$ij(d)));T.equals(l.$zw(g),t.$zw(z))&&A.$m2(d)}if(u.$bB(Y,t.$zw(A.$ij(0))),s.$bB(Y,l.$zw(A.$ij(0))),1===A.$fj);else{null===E&&(E=new $.C.EXA.$m);var j=f.$MYO();E.$m5(j),_.$Fl(j,!0),s.$bB(j,j);for(N=1;N<A.$fj;N++)for(var p=A.$ij(0),X=!1;null!==p;){for(var K=v.$zw(t.$zw(p)),I=A.$ij(N);null!==I;){var B=v.$zw(t.$zw(I));if(B===K){if(A.$ij(0)!==p)for(var y=0;y<N;y++)A.$lj(y,p);A.$lj(N,I),X=!0;break}I=B}if(X)break;for(y=0;y<N;y++)A.$lj(y,p);p=K}for(N=0;N<A.$fj;N++)u.$bB(A.$ij(N),j);u.$bB(j,t.$zw(A.$ij(0))),n.$pdO(j)}}}else _.$Fl(Y,!1),u.$bB(Y,t.$zw(Y)),s.$bB(Y,l.$zw(Y))}m.$YXO()}var Z=new $.T.DNC.T2(this,this.$rc),M=new $.T.DNC.T4(n,i,_,u,s,P,Z),S=new $.C.ZJC;S.$is=M;var L=new $.C.UIC(S,null);L.$KtO=this.$m1();try{new $.T.DNC.T3(this,L,c,Z).$wx(f)}finally{!function(f,n){null!==f.$f16&&(n.$zqP($.T.HLC.SOURCE_GROUP_ID_DP_KEY),n.$WkP(f.$f16),f.$f16=null),null!==f.$f17&&(n.$zqP($.T.HLC.TARGET_GROUP_ID_DP_KEY),n.$WkP(f.$f17),f.$f17=null),null!==f.$f3&&(n.$zqP($.T.HLC.SOURCE_PORT_CONSTRAINT_DP_KEY),n.$WkP(f.$f3),f.$f3=null),null!==f.$f4&&(n.$zqP($.T.HLC.TARGET_PORT_CONSTRAINT_DP_KEY),n.$WkP(f.$f4),f.$f4=null),null!==f.$f8&&(n.$zqP($.T.YXA.GROUP_NODE_INSETS_DP_KEY),n.$XkP(f.$f8),f.$f8=null),null!==f.$f9&&(n.$zqP($.T.ZJC.LAYOUT_DP_KEY),n.$XkP(f.$f9),f.$f9=null),null!==f.$f2&&(n.$zqP($.T.YXA.NODE_ID_DP_KEY),n.$XkP(f.$f2),f.$f2=null),null!==f.$f15&&(n.$zqP($.T.YXA.PARENT_NODE_ID_DP_KEY),n.$XkP(f.$f15),f.$f15=null),null!==f.$f6&&(n.$zqP($.T.YXA.GROUP_DP_KEY),n.$XkP(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$Mv(),f.$f=null),f.$f19=null}(this,f),null!==i&&f.$nBP($.T.YXA.GROUP_DP_KEY,i),null!==t&&f.$nBP($.T.YXA.PARENT_NODE_ID_DP_KEY,t),null!==l&&f.$nBP($.T.YXA.NODE_ID_DP_KEY,l),null!==e&&f.$nBP($.T.YXA.GROUP_NODE_INSETS_DP_KEY,e)}if(n.$vYO(),null!==E){for(N=0;N<E.$f1;N++)f.$NgO(E.$ij(N));E=null}if(o.$vYO(),null!==this.$f1)for(N=0;N<this.$f1.$fj;N++)f.$NgO(this.$f11.$ij(N));if(null!==a){f.$nBP($.T.YSC.AFFECTED_EDGES_DP_KEY,a);var x=new $.C.DTC;x.$RFO=$.T.YSC.AFFECTED_EDGES_DP_KEY;try{x.$wx(f)}finally{f.$zqP($.T.YSC.AFFECTED_EDGES_DP_KEY),f.$WkP(a)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new P(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(f,n){$.C.AKC.call(this,n),this.$f=f,this.$f1=$.T.WXA.$y()},$f1:null,"$m!":function($){return this.$f1.$zw($)},"$wx!":function($){if(this.$is.$wx($),this.$f.$m1())for(var f=$.$ZZO();f.$Fq;f.$ov())for(var n=f.$Rq.$clP(null);n.$Fq;n.$ov()){var i=n.$Qq;this.$f1.$bB(i,$.$tqP(i))}},$f:null}}),T3:new P(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(f,n,i,t){$.C.AKC.call(this,n),this.$f=f,this.$f2=i,this.$f1=t},$f2:null,$f1:null,"$wx!":function(f){if(this.$f.$m1()){var n=new $.C.ZXA(f),i=$.T.WXA.$z();!function(f,n,i,t){for(var r=i.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY),e=f.$f.$f11.$QWO();e.$Fq;e.$ov()){var o=e.$Rq,a=n.$HiP(o);if(l(0,a,r)){t.$Fl(o,!0);for(var _=a.$QWO();_.$Fq;_.$ov()){var u=_.$Rq;if(1!==r.$zw(u))for(var s=u.$clP(null);s.$Fq;s.$ov())f.$f.$f4.$bB(s.$Qq,null)}}}}(this,n,f,i),this.$is.$wx(f),function(f,n,i,t,l){for(var r=n.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY),e=f.$f.$f11.$QWO();e.$Fq;e.$ov()){var o=e.$Rq;if(t.$xl(o)){for(var a=i.$HiP(o),_=null,u=null,s=a.$QWO();s.$Fq;s.$ov()){var P=s.$Rq;1!==r.$zw(P)&&P.$f6>0&&(null===_?_=P:u=P)}if(null!==_&&null!==u){var v=n.$nhO(_),E=n.$nhO(u),T=l.$m(_.$f11).$f,h=l.$m(u.$f11).$f;if(v>E&&T<h||v<E&&T>h){var O=n.$SlP(o);for(s=a.$QWO();s.$Fq;s.$ov()){P=s.$Rq;var D=O.$f+O.$f3-(n.$nhO(P)-O.$f);n.$XDP(P,D,n.$ohO(P))}}}}}}(this,f,n,i,this.$f1),function(f,n,i,t){for(var l=n.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY),r=f.$f.$f11.$QWO();r.$Fq;r.$ov()){var e=r.$Rq;if(t.$xl(e))for(var o=i.$HiP(e).$QWO();o.$Fq;o.$ov()){var a=o.$Rq;if(1!==l.$zw(a))for(var _=a.$clP(null);_.$Fq;_.$ov()){var u=_.$Qq;n.$tCP(u,new $.C.FWA.$n(0,-n.$m38(a).$os/2)),f.$f.$f4.$bB(u,$.T.FLC.$n(1,!0))}}}}(this,f,n,i),f.$nBP($.T.YXA.GROUP_NODE_INSETS_DP_KEY,this.$f.$f8);var t=this.$f1.$is;t.$If=0,this.$f2.$f1=!0,this.$is.$wx(f),t.$If=1,this.$f2.$f1=!1,f.$zqP($.T.JOC.INCREMENTAL_HINTS_DP_KEY),n.$YXO()}else this.$is.$wx(f)},$f:null}}),T4:new P(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(f,n,i,t,l,r,e){$.C.AKC.call(this,e),this.$f=f,this.$f1=n,this.$f2=i,this.$f5=t,this.$f4=l,this.$f3=r},"$wx!":function(f){var n=new $.C.EXA.$n(this.$f.$ubO());this.$f.$vYO(),null!==this.$f1&&(f.$nBP($.T.YXA.GROUP_DP_KEY,this.$f2),f.$nBP($.T.YXA.PARENT_NODE_ID_DP_KEY,this.$f5),f.$nBP($.T.YXA.NODE_ID_DP_KEY,this.$f4),f.$nBP($.T.YXA.GROUP_NODE_INSETS_DP_KEY,this.$f3)),this.$OTP(f),this.$f.$qdO(n),f.$zqP($.T.YXA.GROUP_DP_KEY),f.$zqP($.T.YXA.PARENT_NODE_ID_DP_KEY),f.$zqP($.T.YXA.NODE_ID_DP_KEY),f.$zqP($.T.YXA.GROUP_NODE_INSETS_DP_KEY)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new P(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new P(function(){return{$final:!0,$with:[$.C.FJC],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.WXA.$z(),this.$f2=new $.T.DNC.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$wx!":function(f){if(1!==f.$jZ){if(2===f.$jZ&&this.$f.$f10&&this.$f.$f22.$Fw(f.$iZ)<2&&this.$f.$f22.$Fw(f.$bW)<2){for(var n=null,i=null,t=f.$ZZO();t.$Fq;t.$ov()){var l=t.$Rq;1!==f.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(l)?n=l:i=l}if(null!==n&&null!==i){var r=f.$m38(n),e=f.$m38(i);r.$nD(-r.$Sr/2,0),e.$nD(-e.$Sr/2,r.$os+this.$f.$f14);for(var o=i.$clP(null);o.$Fq;o.$ov()){var a=o.$Qq;($$=f.$m37(a)).$av(),$$.$Bt=new $.C.FWA.$n(0,0),$$.$Ct=new $.C.FWA.$n(0,0)}var _=this.$f.$f8.$zw(n),u=new $.C.WVA(_.top,_.left,-this.$f.$f14-f.$m38(i).$os,_.right);return void this.$f.$f8.$bB(n,u)}}var P=new $.C.EXA.$m;if(this.$f1)P.$NdO(f.$ZZO()),P.$rdO(new $.T.DNC.T1.T1(this,f));else{var v=new $.C.EXA.$m,E=new $.C.EXA.$m;for(t=f.$ZZO();t.$Fq;t.$ov()){l=t.$Rq;1!==f.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(l)?v.$m5(l):E.$m5(l)}for(var T=null,h=0,O=0;O<v.$f1;O++){(G=v.$ij(O)).$pbO().$Pq>h&&(h=G.$pbO().$Pq,T=G)}v.$Dp(T),P.$m5(T),function f(n,i,t,l,r){for(var e=new $.C.EXA.$m,o=r.$pbO();o.$Fq;o.$ov()){var a=o.$Rq;if(t.$Dp(a)){var _=s(n,a,r,new $.C.EXA.$o(r));n.$f3.$hB(a,_),e.$m5(a)}}e.$rdO(n.$f2);var u=r.$f2.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY),P=!1;if(1===e.$f1&&l.indexOf(r)===l.$f1-1&&(P=!0),2===n.$f.$f20||4===n.$f.$f20)for(var v=0;v<e.$f1;v++)4===n.$f.$f20===(2===u.$zw(r))?l.$m5(e.$ij(v)):l.$Hp(0,e.$ij(v));else if(0!==n.$f.$f20&&1===l.$f1&&1===e.$f1)3===n.$f.$f20===(2===u.$zw(r))?l.$m5(e.$ij(0)):l.$Hp(0,e.$ij(0));else{var E=l.indexOf(r),T=l.indexOf(r)+1;for(v=0;v<e.$f1;v++)v%2!==0||P?l.$Hp(T,e.$ij(v)):l.$Hp(E,e.$ij(v)),T++}var h=new $.C.EXA.$m;for(v=0;v<e.$f1;v++){for(var O=!1,D=null,C=(a=e.$ij(v)).$zbO();C.$Fq;C.$ov())if((D=C.$Rq)!==r){O=!0;break}if(i.$Dp(D)){h.$m5(D);var w=l.indexOf(a);l.indexOf(r)>w?l.$Hp(l.indexOf(a),D):l.$Hp(l.indexOf(a)+1,D)}else if(O){var Y=0;for(l.$Dp(a),C=a.$zbO();C.$Fq;C.$ov())Y=Math.max(l.indexOf(C.$Rq),Y);l.$Hp(Y,a)}}e=null;for(v=0;v<h.$f1;v++)f(n,i,t,l,h.$ij(v))}(this,v,E,P,T)}var D=new $.C.EXA.$m,C=new $.C.EXA.$m,w=new $.FE,Y=0,c=0,m=Number.MAX_VALUE;for(O=0;O<P.$f1;O++){l=P.$ij(O);var A=f.$m38(l);1===f.$ZlP($.T.DNC.FAMILY_TYPE_DP_KEY).$zw(l)?(D.$m5(l),w.$m(O),A.$nD(Y+Math.max((this.$f.$f13-A.$Sr)/2,A.$Sr/4),-A.$os/2),Y=Y+Math.max(1.5*A.$Sr,this.$f.$f13)|0):(C.$m5(l),m=Math.min(A.$os,m),c=Math.max(A.$os,c),A.$nD(Y,-A.$os/2),Y=Y+A.$Sr|0)}if(0!==this.$f.$f7)for(O=0;O<C.$f1;O++){A=f.$m38(C.$ij(O));1===this.$f.$f7?A.$nD(A.$Dq,-(A.$os-m/2)):A.$nD(A.$Dq,-m/2)}var F=$.DF.$m10(P.$f1),q=-2;for(O=0;O<D.$f1;O++){var R=D.$ij(O),N=!1,b=$.VE.$m8(w.$ij(O));if(this.$f.$f18||q===b-1&&0===F[q])N=!0;else for(var z=R.$zbO();z.$Fq;z.$ov()){var d=z.$Rq,g=P.indexOf(d)-b;if(Math.abs(g)>2){N=!0;break}}if(N)F[b]=1;else{var j=new $.C.FWA.$n(0,0);for(o=R.$clP(null);o.$Fq;o.$ov()){a=o.$Qq;if(($$=f.$m37(a)).$av(),0===this.$f.$f7)$$.$Bt=j;else{A=f.$m38(a.$f2);f.$qCP(a,new $.C.FWA.$n(A.$Dq+A.$Sr/2,0))}$$.$Ct=j}D.$m8(O),w.$m2(O),O--}q=b}var p,X=c/2;1===this.$f.$f7?X=m/2:-1===this.$f.$f7&&(X=c-m/2),p=X;for(O=0;O<D.$f1;O++){R=D.$ij(O);for(var K=$.VE.$m8(w.$ij(O)),I=0,B=R.$zbO();B.$Fq;B.$ov()){for(var y=P.indexOf(B.$Rq),Z=Math.min(K,y),M=Math.max(K,y),S=0,L=Z;L<=M;L++)S+=F[L];I=Math.max(S,I)}A=f.$m38(R);var x=X+this.$f.$f14+(A.$os+this.$f.$f14)*(I-1);A.$nD(A.$Dq,x),p=Math.max(p,x+A.$os)}for(var W=0;W<C.$f1;W++){var G=C.$ij(W),Q=P.indexOf(G),k=0,U=new $.C.IVA.$m;for(o=G.$ZnP(null);o.$Fq;o.$ov()){a=o.$Qq;F[P.indexOf(a.$f3)]>0&&(U.$m5(a),k++)}if(k>0){var H=f.$m38(G).$Sr/(k+1),J=$.DF.$m10(U.$f1),V=$.DF.$m10(U.$f1);for(O=0;O<U.$f1;O++){J[O]=P.indexOf(U.$ij(O).$f3)-Q,J[O]>0&&(J[O]-=2*P.$f1),V[O]=H;for(L=0;L<O;L++)J[O]>J[L]?V[L]+=H:V[O]+=H}for(O=0;O<U.$f1;O++){var $$;a=U.$ij(O);($$=f.$m37(a)).$av(),$$.$Ct=new $.C.FWA.$n(0,0);var f$=f.$m38(G),n$=f.$m38(a.$f3),i$=this.$f.$f19.$rk(a)?f$.$Sr/2:V[O],t$=n$.$Eq+n$.$os/2;$$.$Bt=new $.C.FWA.$n(i$-f$.$Sr/2,0),$$.$DC(f$.$Dq+i$,t$)}}}var l$=(_=this.$f.$f8.$zw(C.$ij(0))).top,r$=_.bottom;null!==_&&0===this.$f.$f7?l$=p-X:null!==_&&1===this.$f.$f7&&(r$=X-p),this.$f.$f8.$bB(C.$ij(0),new $.C.WVA(l$,_.left,r$,_.right))}},$f:null,$static:{T:new P(function(){return{$final:!0,$with:[$.C.QYA],constructor:function($,f,n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$Ip!":function(f,n){var i=$.T.QXA.$m(this.$f.$Fw(f),this.$f.$Fw(n));return 0!==i?i:$.T.QXA.$m(this.$f2.$Fw(f),this.$f2.$Fw(n))},$f1:null}}),T1:new P(function(){return{$final:!0,$with:[$.C.QYA],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$Ip!":function(f,n){return $.T.QXA.$v(this.$f.$nhO(f),this.$f.$nhO(n))},$f1:null}})}}}),$clinit:function(){$.T.DNC.FAMILY_TYPE_DP_KEY=new $.C.GVA($.C.ENC.$class,$.C.DNC.$class,C[3])}}}})}),E("_$$_rta",function($){$._$_gjn=new v(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),E("_$$_rta",function($){$._$_hjn=new v(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})}),E("_$$_rta",function($){$._$_ijn=new v(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;
